package com.patchpets.Activitys;

import android.databinding.DataBindingUtil;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.constraint.ConstraintLayout;
import android.support.design.widget.BottomSheetBehavior;
import android.support.v4.view.ViewPager;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

import com.patchpets.Adapters.SlidingImageAdapter;
import com.patchpets.R;
import com.patchpets.databinding.ActivityDogDetailsBinding;

import java.util.ArrayList;

public class DogDetailsActivity extends AppCompatActivity implements View.OnClickListener {

    private ActivityDogDetailsBinding binding;
    private ConstraintLayout clMain, clBottomSheet;
    private ImageButton ibBack, ibPark, ibInstagram, ibMessage, ibLike;
    private TextView tvDogName, tvLastActiveStatus, tvLocation, tvDogDescription;
    private BottomSheetBehavior bottomSheetBehavior;
    private ViewPager vpDogs;
    private int fav = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        binding = DataBindingUtil.setContentView(this, R.layout.activity_dog_details);

        bindViews();
        setListener();

        bottomSheetBehavior = BottomSheetBehavior.from(clBottomSheet);
        bottomSheetBehavior.setBottomSheetCallback(bottomSheetCallback);

        ArrayList<String> alString = new ArrayList<>();
        alString.add("https://wallpapercave.com/wp/wp2316825.jpg");
        alString.add("https://wallpapercave.com/wp/wp2316825.jpg");
        alString.add("https://wallpapercave.com/wp/wp2316825.jpg");
        alString.add("https://wallpapercave.com/wp/wp2316825.jpg");
        alString.add("https://wallpapercave.com/wp/wp2316825.jpg");

        SlidingImageAdapter viewPagerAdapter = new SlidingImageAdapter(DogDetailsActivity.this, alString);
        vpDogs.setAdapter(viewPagerAdapter);
    }

    private void bindViews() {
        clMain = binding.clMain;
        vpDogs = binding.vpDogs;
        clBottomSheet = binding.clBottomSheet;
        ibBack = binding.ibBack;
        ibPark = binding.ibPark;
        ibInstagram = binding.ibInstagram;
        ibMessage = binding.ibMessage;
        ibLike = binding.ibLike;
        tvDogName = binding.tvDogName;
        tvLastActiveStatus = binding.tvLastActiveStatus;
        tvLocation = binding.tvLocation;
        tvDogDescription = binding.tvDogDescription;
    }

    private void setListener() {
        ibBack.setOnClickListener(this);
        ibPark.setOnClickListener(this);
        ibInstagram.setOnClickListener(this);
        ibMessage.setOnClickListener(this);
        ibLike.setOnClickListener(this);
        clBottomSheet.setOnClickListener(this);
    }

    private BottomSheetBehavior.BottomSheetCallback bottomSheetCallback = new BottomSheetBehavior.BottomSheetCallback() {
        @Override
        public void onStateChanged(@NonNull View view, int newState) {
            switch (newState) {
                case BottomSheetBehavior.STATE_HIDDEN:
                    break;
                case BottomSheetBehavior.STATE_EXPANDED:
                    break;
                case BottomSheetBehavior.STATE_COLLAPSED:
                    break;
                case BottomSheetBehavior.STATE_DRAGGING:
                    break;
                case BottomSheetBehavior.STATE_SETTLING:
                    break;
            }
        }

        @Override
        public void onSlide(@NonNull View view, float v) {
        }
    };

    @Override
    public void onClick(View v) {
        try {
            switch (v.getId()) {
                case R.id.ibBack:
                    onBackPressed();
                    break;

                case R.id.ibPark:
                    break;

                case R.id.ibInstagram:
                    break;

                case R.id.ibMessage:
                    break;

                case R.id.ibLike:
                    if (fav == 0) {
                        fav = 1;
                        ibLike.setBackground(getResources().getDrawable(R.drawable.fav));
                    } else {
                        fav = 0;
                        ibLike.setBackground(getResources().getDrawable(R.drawable.unfav));
                    }
                    break;

                case R.id.clBottomSheet:
                    if (bottomSheetBehavior.getState() != BottomSheetBehavior.STATE_EXPANDED) {
                        bottomSheetBehavior.setState(BottomSheetBehavior.STATE_EXPANDED);
                    } else {
                        bottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);
                    }
                    break;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
